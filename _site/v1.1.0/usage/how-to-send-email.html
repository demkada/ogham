
<!DOCTYPE html>
<!--
 Generated by Apache Maven Doxia at 2017-03-19
 Rendered using Reflow Maven Skin 1.1.1 (http://andriusvelykis.github.io/reflow-maven-skin)
-->
<html  xml:lang="en" lang="en">

	<head>
		<meta charset="UTF-8" />
		<title>Email | ogham</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content="" />
		<meta http-equiv="content-language" content="en" />
 
		<link href="http://netdna.bootstrapcdn.com/bootswatch/2.3.2/cerulean/bootstrap.min.css" rel="stylesheet" />
		<link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-responsive.min.css" rel="stylesheet" />
		<link href="http://groupe-sii.github.io/ogham//css/bootswatch.css" rel="stylesheet" />
		<link href="http://groupe-sii.github.io/ogham//css/reflow-skin.css" rel="stylesheet" />

		<link href="http://yandex.st/highlightjs/7.5/styles/github.min.css" rel="stylesheet" />

		<link href="http://groupe-sii.github.io/ogham//css/lightbox.css" rel="stylesheet" />

		<link href="http://groupe-sii.github.io/ogham//css/site.css" rel="stylesheet" />
		<link href="http://groupe-sii.github.io/ogham//css/print.css" rel="stylesheet" media="print" />

		<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
		<!--[if lt IE 9]>
			<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->


		
<link rel="author" href="https://github.com/aurelien-baudet"/>
<link rel="stylesheet" href="http://groupe-sii.github.io/ogham//css/highlight-lines.css"/>
<link rel="stylesheet" href="http://groupe-sii.github.io/ogham//css/collapse-lines.css"/>
<link rel="stylesheet" href="http://groupe-sii.github.io/ogham//css/alternatives.css"/>
	</head>

	<body class="page-usage-how-to-send-email project-ogham-parent" data-spy="scroll" data-offset="60" data-target="#toc-scroll-target">

		<div class="navbar navbar-fixed-top">
			<div class="navbar-inner">
				<div class="container">
					<a class="btn btn-navbar" data-toggle="collapse" data-target="#top-nav-collapse">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</a>
					<a class="brand" href="http://groupe-sii.github.io/ogham">Ogham</a>
					<div class="nav-collapse collapse" id="top-nav-collapse">
						<ul class="nav pull-right">
							<li ><a href="integration.html" title="Download">Download</a></li>
							<li ><a href="http://github.com/groupe-sii/ogham/" title="GitHub project" class="externalLink">GitHub project</a></li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="index.html" title="Usage">Usage</a></li>
									<li ><a href="../config/index.html" title="Configuration">Configuration</a></li>
									<li ><a href="../extend/index.html" title="Extends">Extends</a></li>
									<li ><a href="../apidocs/index.html" title="Javadoc">Javadoc</a></li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Spring <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="integration.html#integrate-with-spring-boot" title="Integration">Integration</a></li>
									<li ><a href="spring.html" title="Usage">Usage</a></li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Samples <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="https://github.com/groupe-sii/ogham/tree/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/email" title="Email" class="externalLink">Email</a></li>
									<li ><a href="https://github.com/groupe-sii/ogham/tree/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/sms" title="SMS" class="externalLink">SMS</a></li>
									<li ><a href="https://github.com/groupe-sii/ogham/tree/master/sample-spring-usage/src/main/java/fr/sii/ogham/sample/springboot/" title="Spring" class="externalLink">Spring</a></li>
									<li ><a href="https://github.com/groupe-sii/ogham/tree/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/template/thymeleaf" title="Thymeleaf" class="externalLink">Thymeleaf</a></li>
									<li ><a href="https://github.com/groupe-sii/ogham/tree/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/template/freemarker" title="FreeMarker" class="externalLink">FreeMarker</a></li>
									<li ><a href="https://github.com/groupe-sii/ogham/tree/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/email/HtmlAndTextMixedTemplateEnginesSample.java" title="Mixing Thymeleaf & FreeMarker" class="externalLink">Mixing Thymeleaf & FreeMarker</a></li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Contribute <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="../contribute.html" title="Contribute">Contribute</a></li>
									<li ><a href="http://github.com/groupe-sii/ogham/issues/" title="Issues" class="externalLink">Issues</a></li>
									<li ><a href="http://github.com/groupe-sii/ogham/" title="Fork on GitHub" class="externalLink">Fork on GitHub</a></li>
								</ul>
							</li>
						</ul>
					</div><!--/.nav-collapse -->
				</div>
			</div>
		</div>

	<div class="container">

	<!-- Masthead
	================================================== -->

	<header>
	<div class="jumbotron subhead">
		<div class="row" id="banner">
			<div class="span12">
				<div class="pull-left">
					<a href="http://groupe-sii.github.io/ogham" id="bannerLeft"><h1>Ogham</h1></a>
					<p class="lead">Open, General and Highly Adaptative Messaging library</p>
				</div>
				<div class="pull-right">
				</div>
			</div>
		</div>
	</div>
		<div>
			<ul class="breadcrumb">
				<li class="publishDate version-date">Last Published: 2017-03-19</li>
				<li class="divider">|</li>
				<li><a href="../" title="Ogham">Ogham</a></li>
				<li class="divider">/</li>
				<li>Email</li>
			</ul>
		</div>
		<hr class="toc-separator" />
		<div id="toc-bar" class="navbar" data-spy="affix" data-offset-top="250">
			<div class="navbar-inner">
				<div id="toc-scroll-target" class="container">
					<a class="btn btn-navbar" data-toggle="collapse" data-target="#toc-nav-collapse">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</a>
					<div class="nav-collapse collapse" id="toc-nav-collapse">
						<ul id="toc" class="nav">
						<li class="toplevel"><a href="#Email" title="Email">Email</a></li>
						<li class="dropdown">
							<a href="#Basic" title="Basic" class="dropdown-toggle" role="button" data-toggle="dropdown" data-target="#">Basic <b class="caret"></b></a>
							<ul class="dropdown-menu" role="menu">
								<!-- Repeat the item, otherwise it is not clickable as the dropdown root -->
								<li><a href="#Basic" title="Basic">Basic</a></li>
								<li class="divider"></li>
								<li><a href="#Load_properties_from_file" title="Load properties from file">Load properties from file</a></li>
								<li class="dropdown-submenu">
									<a href="#Gmail_sample" title="Gmail sample">Gmail sample</a>
									<ul class="dropdown-menu" role="menu">
								<li><a href="#SSL" title="SSL">SSL</a></li>

									</ul>
								</li>

							</ul>
						</li>
						<li class="dropdown">
							<a href="#Using_templates" title="Using templates" class="dropdown-toggle" role="button" data-toggle="dropdown" data-target="#">Using templates <b class="caret"></b></a>
							<ul class="dropdown-menu" role="menu">
								<!-- Repeat the item, otherwise it is not clickable as the dropdown root -->
								<li><a href="#Using_templates" title="Using templates">Using templates</a></li>
								<li class="divider"></li>
								<li><a href="#Sending_email_with_template" title="Sending email with template">Sending email with template</a></li>
								<li><a href="#Sending_email_with_subject_from_template" title="Sending email with subject from template">Sending email with subject from template</a></li>
								<li><a href="#Both_HTML_and_text" title="Both HTML and text">Both HTML and text</a></li>
								<li class="dropdown-submenu">
									<a href="#Using_FreeMarker" title="Using FreeMarker">Using FreeMarker</a>
									<ul class="dropdown-menu" role="menu">
								<li><a href="#Sending_an_email_with_both_HTML_and_text" title="Sending an email with both HTML and text">Sending an email with both HTML and text</a></li>
								<li><a href="#Mixing_Thymeleaf_and_FreeMarker" title="Mixing Thymeleaf and FreeMarker">Mixing Thymeleaf and FreeMarker</a></li>

									</ul>
								</li>

							</ul>
						</li>
						<li class="toplevel"><a href="#Attachments" title="Attachments">Attachments</a></li>
						<li class="toplevel"><a href="#Full_sample" title="Full sample">Full sample</a></li>
						<li class="dropdown">
							<a href="#Spring_Boot" title="Spring Boot" class="dropdown-toggle" role="button" data-toggle="dropdown" data-target="#">Spring Boot <b class="caret"></b></a>
							<ul class="dropdown-menu" role="menu">
								<!-- Repeat the item, otherwise it is not clickable as the dropdown root -->
								<li><a href="#Spring_Boot" title="Spring Boot">Spring Boot</a></li>
								<li class="divider"></li>
								<li class="dropdown-submenu">
									<a href="#REST_web_service" title="REST web service">REST web service</a>
									<ul class="dropdown-menu" role="menu">
								<li><a href="#Basic_email" title="Basic email">Basic email</a></li>
								<li><a href="#Email_with_subject_in_templates" title="Email with subject in templates">Email with subject in templates</a></li>

									</ul>
								</li>

							</ul>
						</li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</header>

	<div class="main-body">
	<div class="row">
		<div class="span12">
			<div class="body-content">
<div class="section"> 
 <div class="page-header">
  <h2 id="Email">Email</h2>
 </div> 
 <p>The samples are available in the <a class="externalLink" href="https://github.com/groupe-sii/ogham/tree/master/sample-standard-usage">sample-standard-usage sub-project</a>.</p> 
 <p>All samples shown bellow are using SMTP for sending email. See <a href="../config/select-implementation.html">select implementation</a> to know other ways to send email.</p> 
 <div class="section"> 
  <h3 id="Basic"><a name="basic"></a>Basic</h3> 
  <p>This sample shows how to send a basic email. The sample is available <a class="externalLink" href="https://github.com/groupe-sii/ogham/tree/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/email/BasicSample.java">here</a>.</p> 
  <p>The first lines configure the properties that will be used by the sender. Then you must create the service. You can use the MessagingBuilder to help you to create the service. Finally, the last line sends the email. The specified email is really basic. It only contains the subject, the textual content and the receiver address. The sender address is automatically added to the email by the service based on configuration properties.</p> 
  <p>See other examples for advanced usages (using a templated content or adding attachments).</p> 
  <p><span class="highlight" data-irrelevant-lines="1-9"></span> <span class="collapse" data-lines="1-9"></span></p> 
  <div class="source"> 
   <div class="source"> 
    <pre>package fr.sii.ogham.sample.standard.email;

import java.util.Properties;

import fr.sii.ogham.core.builder.MessagingBuilder;
import fr.sii.ogham.core.exception.MessagingException;
import fr.sii.ogham.core.service.MessagingService;
import fr.sii.ogham.email.message.Email;

public class BasicSample {

	public static void main(String[] args) throws MessagingException {
		// configure properties (could be stored in a properties file or defined
		// in System properties)
		Properties properties = new Properties();
		properties.put(&quot;mail.smtp.host&quot;, &quot;&lt;your server host&gt;&quot;);
		properties.put(&quot;mail.smtp.port&quot;, &quot;&lt;your server port&gt;&quot;);
		properties.put(&quot;ogham.email.from&quot;, &quot;&lt;email address to display for the sender user&gt;&quot;);
		// Instantiate the messaging service using default behavior and
		// provided properties
		MessagingService service = new MessagingBuilder().useAllDefaults(properties).build();
		// send the email
		service.send(new Email(&quot;subject&quot;, &quot;email content&quot;, &quot;&lt;recipient address&gt;&quot;));
	}

}
</pre> 
   </div> 
  </div> 
  <p>If you prefer, you can also use the fluent API (highlighted lines):</p> 
  <p><span class="highlight" data-lines="23-26" data-irrelevant-lines="1-9,13-22"></span> <span class="collapse" data-lines="1-9,13-22"></span></p> 
  <div class="source"> 
   <div class="source"> 
    <pre>package fr.sii.ogham.sample.standard.email;

import java.util.Properties;

import fr.sii.ogham.core.builder.MessagingBuilder;
import fr.sii.ogham.core.exception.MessagingException;
import fr.sii.ogham.core.service.MessagingService;
import fr.sii.ogham.email.message.Email;

public class BasicSample {

	public static void main(String[] args) throws MessagingException {
		// configure properties (could be stored in a properties file or defined
		// in System properties)
		Properties properties = new Properties();
		properties.put(&quot;mail.smtp.host&quot;, &quot;&lt;your server host&gt;&quot;);
		properties.put(&quot;mail.smtp.port&quot;, &quot;&lt;your server port&gt;&quot;);
		properties.put(&quot;ogham.email.from&quot;, &quot;&lt;email address to display for the sender user&gt;&quot;);
		// Instantiate the messaging service using default behavior and
		// provided properties
		MessagingService service = new MessagingBuilder().useAllDefaults(properties).build();
		// send the email
		service.send(new Email().
							subject(&quot;subject&quot;).
							content(&quot;email content&quot;).
							to(&quot;&lt;recipient address&gt;&quot;));
	}

}
</pre> 
   </div> 
  </div> 
  <div class="section"> 
   <h4 id="Load_properties_from_file"><a name="load-properties-from-file"></a>Load properties from file</h4> 
   <p>This sample shows how to send a basic email. The sample is available <a class="externalLink" href="https://github.com/groupe-sii/ogham/tree/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/email/BasicSampleExternalProperties.java">here</a>.</p> 
   <p>If you want to put properties in a configuration file, you can create a properties file (email.properties for example) in src/main/resources folder with the following content:</p> 
   <div class="source"> 
    <div class="source"> 
     <pre>mail.smtp.host=&lt;your server host&gt;
mail.smtp.port=&lt;your server port&gt;
ogham.email.from=&lt;email address to display for the sender user&gt;
</pre> 
    </div> 
   </div> 
   <p>And then load these properties before creating messaging service:</p> 
   <p><span class="highlight" data-lines="14-16" data-irrelevant-lines="1-10,17-19"></span> <span class="collapse" data-lines="1-10,17-19"></span></p> 
   <div class="source"> 
    <div class="source"> 
     <pre>package fr.sii.ogham.sample.standard.email;

import java.io.IOException;
import java.util.Properties;

import fr.sii.ogham.core.builder.MessagingBuilder;
import fr.sii.ogham.core.exception.MessagingException;
import fr.sii.ogham.core.service.MessagingService;
import fr.sii.ogham.email.message.Email;

public class BasicSampleExternalProperties {

	public static void main(String[] args) throws MessagingException, IOException {
		// load properties (available at src/main/resources)
		Properties properties = new Properties();
		properties.load(BasicSampleExternalProperties.class.getResourceAsStream(&quot;/email.properties&quot;));
		// Instantiate the messaging service using default behavior and
		// provided properties
		MessagingService service = new MessagingBuilder().useAllDefaults(properties).build();
		// send the email
		service.send(new Email(&quot;subject&quot;, &quot;email content&quot;, &quot;&lt;recipient address&gt;&quot;));
		// or using fluent API
		service.send(new Email().
						subject(&quot;subject&quot;).
						content(&quot;email content&quot;).
						to(&quot;&lt;recipient address&gt;&quot;));
	}

}
</pre> 
    </div> 
   </div> 
  </div> 
  <div class="section"> 
   <h4 id="Gmail_sample">Gmail sample</h4> 
   <div class="section"> 
    <h5 id="SSL">SSL</h5> 
    <p>This sample shows how to send a basic email through GMail. The sample is available <a class="externalLink" href="https://github.com/groupe-sii/ogham/tree/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/email/gmail/BasicGmailSSLSample.java">here</a>.</p> 
    <p>The first lines configure the properties that will be used by the sender. Then you must create the service. You can use the MessagingBuilder to help you to create the service. Finally, the last line sends the email. The specified email is really basic. It only contains the subject, the textual content and the receiver address. The sender address is automatically added to the email by the service based on configuration properties.</p> 
    <p>See other examples for advanced usages (using a templated content or adding attachments).</p> 
    <p><span class="highlight" data-lines="13-23" data-irrelevant-lines="1-9"></span> <span class="collapse" data-lines="1-9"></span></p> 
    <div class="source"> 
     <div class="source"> 
      <pre>package fr.sii.ogham.sample.standard.email.gmail;

import java.util.Properties;

import fr.sii.ogham.core.builder.MessagingBuilder;
import fr.sii.ogham.core.exception.MessagingException;
import fr.sii.ogham.core.service.MessagingService;
import fr.sii.ogham.email.message.Email;

public class BasicGmailSSLSample {

	public static void main(String[] args) throws MessagingException {
		// configure properties (could be stored in a properties file or defined
		// in System properties)
		Properties properties = new Properties();
		properties.setProperty(&quot;mail.smtp.auth&quot;, &quot;true&quot;);
		properties.setProperty(&quot;mail.smtp.host&quot;, &quot;smtp.gmail.com&quot;);
		properties.setProperty(&quot;mail.smtp.port&quot;, &quot;465&quot;);
		properties.setProperty(&quot;mail.smtp.socketFactory.port&quot;, &quot;465&quot;);
		properties.setProperty(&quot;mail.smtp.socketFactory.class&quot;, &quot;javax.net.ssl.SSLSocketFactory&quot;);
		properties.setProperty(&quot;ogham.email.authenticator.username&quot;, &quot;&lt;your gmail username&gt;&quot;);
		properties.setProperty(&quot;ogham.email.authenticator.password&quot;, &quot;&lt;your gmail password&gt;&quot;);
		properties.setProperty(&quot;ogham.email.from&quot;, &quot;&lt;your gmail address&gt;&quot;);
		// Instantiate the messaging service using default behavior and
		// provided properties
		MessagingService service = new MessagingBuilder().useAllDefaults(properties).build();
		// send the email using constructor
		service.send(new Email(&quot;subject&quot;, &quot;email content&quot;, &quot;&lt;recipient address&gt;&quot;));
		// or send the email using fluent API
		service.send(new Email().
								subject(&quot;subject&quot;).
								content(&quot;email content&quot;).
								to(&quot;&lt;recipient address&gt;&quot;));
	}

}

</pre> 
     </div> 
    </div> 
   </div> 
  </div> 
 </div> 
 <div class="section"> 
  <h3 id="Using_templates"><a name="using-a-template"></a>Using templates</h3> 
  <div class="section"> 
   <h4 id="Sending_email_with_template"><a name="sending-email-with-template"></a>Sending email with template</h4> 
   <p>This sample shows how to send an email with a content following a template engine language. The sample is available <a class="externalLink" href="https://github.com/groupe-sii/ogham/tree/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/email/HtmlTemplateSample.java">here</a>.</p> 
   <p>The first lines configure the properties that will be used by the sender. Then you must create the service. You can use the MessagingBuilder to help you to create the service. Finally, the last line sends the email. The specified email is really basic too. It only contains the subject, the content based on a templated content available in the classpath, a bean to use as source of variable substitutions and the receiver address. The sender address is automatically added to the email by the service based on configuration properties.</p> 
   <p>See other examples for advanced usages (adding attachments).</p> 
   <p><span class="highlight" data-lines="25,29" data-irrelevant-lines="1-11,15-24"></span> <span class="collapse" data-lines="1-11,15-24"></span></p> 
   <div class="source"> 
    <div class="source"> 
     <pre>package fr.sii.ogham.sample.standard.email;

import java.util.Properties;

import fr.sii.ogham.context.SimpleBean;
import fr.sii.ogham.core.builder.MessagingBuilder;
import fr.sii.ogham.core.exception.MessagingException;
import fr.sii.ogham.core.message.content.TemplateContent;
import fr.sii.ogham.core.service.MessagingService;
import fr.sii.ogham.email.message.Email;

public class HtmlTemplateSample {

	public static void main(String[] args) throws MessagingException {
		// configure properties (could be stored in a properties file or defined
		// in System properties)
		Properties properties = new Properties();
		properties.setProperty(&quot;mail.smtp.host&quot;, &quot;&lt;your server host&gt;&quot;);
		properties.setProperty(&quot;mail.smtp.port&quot;, &quot;&lt;your server port&gt;&quot;);
		properties.setProperty(&quot;ogham.email.from&quot;, &quot;&lt;email address to display for the sender user&gt;&quot;);
		// Instantiate the messaging service using default behavior and
		// provided properties
		MessagingService service = new MessagingBuilder().useAllDefaults(properties).build();
		// send the email using constructor
		service.send(new Email(&quot;subject&quot;, new TemplateContent(&quot;classpath:/template/thymeleaf/simple.html&quot;, new SimpleBean(&quot;foo&quot;, 42)), &quot;&lt;recipient address&gt;&quot;));
		// or send the email using fluent API
		service.send(new Email().
							subject(&quot;subject&quot;).
							content(new TemplateContent(&quot;classpath:/template/thymeleaf/simple.html&quot;, new SimpleBean(&quot;foo&quot;, 42))).
							to(&quot;&lt;recipient address&gt;&quot;));
	}

}

</pre> 
    </div> 
   </div> 
   <p>Here is the templated content:</p> 
   <div class="source"> 
    <div class="source"> 
     <pre>&lt;!DOCTYPE html&gt;
&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;
    &lt;head&gt;
        &lt;meta charset=&quot;utf-8&quot; /&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h1 class=&quot;title&quot; th:text=&quot;${name}&quot;&gt;&lt;/h1&gt;
        &lt;p class=&quot;text&quot; th:text=&quot;${value}&quot;&gt;&lt;/p&gt;
    &lt;/body&gt;
&lt;/html&gt;

</pre> 
    </div> 
   </div> 
   <p>The template is available <a class="externalLink" href="https://github.com/groupe-sii/ogham/tree/master/sample-standard-usage/src/main/resources/template/thymeleaf/simple.html">here</a></p> 
  </div> 
  <div class="section"> 
   <h4 id="Sending_email_with_subject_from_template"><a name="sending-email-with-subject-from-template"></a>Sending email with subject from template</h4> 
   <p>This sample is a variant of the previous one. It allows you to directly use the HTML title as subject of your email. It may be useful to use variables in the subject too, to mutualize the code and to avoid to create a new file just for one line.</p> 
   <p><span class="highlight" data-lines="27,31-33,25-26,29-30" data-irrelevant-lines="1-11,15-23"></span> <span class="collapse" data-lines="1-11,15-23"></span></p> 
   <div class="source"> 
    <div class="source"> 
     <pre>package fr.sii.ogham.sample.standard.email;

import java.util.Properties;

import fr.sii.ogham.context.SimpleBean;
import fr.sii.ogham.core.builder.MessagingBuilder;
import fr.sii.ogham.core.exception.MessagingException;
import fr.sii.ogham.core.message.content.TemplateContent;
import fr.sii.ogham.core.service.MessagingService;
import fr.sii.ogham.email.message.Email;

public class HtmlTemplateWithSubjectSample {

	public static void main(String[] args) throws MessagingException {
		// configure properties (could be stored in a properties file or defined
		// in System properties)
		Properties properties = new Properties();
		properties.setProperty(&quot;mail.smtp.host&quot;, &quot;&lt;your server host&gt;&quot;);
		properties.setProperty(&quot;mail.smtp.port&quot;, &quot;&lt;your server port&gt;&quot;);
		properties.setProperty(&quot;ogham.email.from&quot;, &quot;&lt;email address to display for the sender user&gt;&quot;);
		// Instantiate the messaging service using default behavior and
		// provided properties
		MessagingService service = new MessagingBuilder().useAllDefaults(properties).build();
		// send the email using constructor
		// subject is set to null to let automatic mechanism to read the title
		// of the HTML and use it as subject of your email
		service.send(new Email(null, new TemplateContent(&quot;classpath:/template/thymeleaf/simpleWithSubject.html&quot;, new SimpleBean(&quot;foo&quot;, 42)), &quot;&lt;recipient address&gt;&quot;));
		// or send the email using fluent API
		// subject is not set to let automatic mechanism to read the title
		// of the HTML and use it as subject of your email
		service.send(new Email().
							content(new TemplateContent(&quot;classpath:/template/thymeleaf/simpleWithSubject.html&quot;, new SimpleBean(&quot;foo&quot;, 42))).
							to(&quot;&lt;recipient address&gt;&quot;));
	}

}
</pre> 
    </div> 
   </div> 
   <p>Here is the templated content :</p> 
   <p><span class="highlight" data-lines="4"></span></p> 
   <div class="source"> 
    <div class="source"> 
     <pre>&lt;!DOCTYPE html&gt;
&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;
    &lt;head&gt;
        &lt;title&gt;Subject of the email&lt;/title&gt;
        &lt;meta charset=&quot;utf-8&quot; /&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h1 class=&quot;title&quot; th:text=&quot;${name}&quot;&gt;&lt;/h1&gt;
        &lt;p class=&quot;text&quot; th:text=&quot;${value}&quot;&gt;&lt;/p&gt;
    &lt;/body&gt;
&lt;/html&gt;

</pre> 
    </div> 
   </div> 
   <p>You can look directly at the sample codes: <a class="externalLink" href="https://github.com/groupe-sii/ogham/tree/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/email/HtmlTemplateSample.java">Java</a> and <a class="externalLink" href="https://github.com/groupe-sii/ogham/tree/master/sample-standard-usage/src/main/resources/template/thymeleaf/simpleWithSubject.html">HTML</a>.</p> 
   <p>For text templates, the subject is automatically used (like for HTML title) if the first line starts with <tt>Subject:</tt> (spaces can be added after colon). Other lines are used as content of the email.</p> 
  </div> 
  <div class="section"> 
   <h4 id="Both_HTML_and_text"><a name="both-html-and-text"></a>Both HTML and text</h4> 
   <p>Sending an email with HTML content <b>and</b> text content might be really important, at least for smartphones. When a smartphone receives an email, it displays the sender, the subject and also a preview of the message, using the text alternative. If the message is only HTML, the preview might be unreadable.</p> 
   <p>This sample shows how to provide both HTML content and text content. This sample is available <a class="externalLink" href="https://github.com/groupe-sii/ogham/tree/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/email/HtmlAndTextSample.java">here</a>.</p> 
   <p><span class="highlight" data-lines="24-26,30" data-irrelevant-lines="1-9,14-21"></span> <span class="collapse" data-lines="1-9,14-21"></span></p> 
   <div class="source"> 
    <div class="source"> 
     <pre>package fr.sii.ogham.sample.standard.email;

import java.util.Properties;

import fr.sii.ogham.core.builder.MessagingBuilder;
import fr.sii.ogham.core.exception.MessagingException;
import fr.sii.ogham.core.message.content.MultiContent;
import fr.sii.ogham.core.service.MessagingService;
import fr.sii.ogham.email.message.Email;

public class HtmlAndTextSample {

	public static void main(String[] args) throws MessagingException {
		// configure properties (could be stored in a properties file or defined
		// in System properties)
		Properties properties = new Properties();
		properties.put(&quot;mail.smtp.host&quot;, &quot;&lt;your server host&gt;&quot;);
		properties.put(&quot;mail.smtp.port&quot;, &quot;&lt;your server port&gt;&quot;);
		properties.put(&quot;ogham.email.from&quot;, &quot;&lt;email address to display for the sender user&gt;&quot;);
		// Instantiate the messaging service using default behavior and
		// provided properties
		MessagingService service = new MessagingBuilder().useAllDefaults(properties).build();
		// send the email using constructor
		String html = &quot;&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;meta charset=\&quot;utf-8\&quot; /&gt;&lt;/head&gt;&lt;body&gt;&lt;h1 class=\&quot;title\&quot;&gt;Hello World&lt;/h1&gt;&lt;p class=\&quot;text\&quot;&gt;Foo bar&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;&quot;;
		String text = &quot;Hello World !\r\nFoo bar&quot;;
		service.send(new Email(&quot;subject&quot;, new MultiContent(html, text), &quot;&lt;recipient address&gt;&quot;));
		// or send the email using fluent API
		service.send(new Email().
							subject(&quot;subject&quot;).
							content(new MultiContent(html, text)).
							to(&quot;&lt;recipient address&gt;&quot;));
	}

}
</pre> 
    </div> 
   </div> 
   <p>This sample shows how to provide both HTML content and text content following a template engine language. The sample shows the shorthand version that avoids specifying twice the path to the template. This sample is available <a class="externalLink" href="https://github.com/groupe-sii/ogham/tree/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/email/HtmlAndTextTemplateSample.java">here</a>.</p> 
   <p><span class="highlight" data-lines="28,32,25-27" data-irrelevant-lines="1-10,15-23"></span> <span class="collapse" data-lines="1-10,15-23"></span></p> 
   <div class="source"> 
    <div class="source"> 
     <pre>package fr.sii.ogham.sample.standard.email;

import java.util.Properties;

import fr.sii.ogham.context.SimpleBean;
import fr.sii.ogham.core.builder.MessagingBuilder;
import fr.sii.ogham.core.exception.MessagingException;
import fr.sii.ogham.core.message.content.MultiTemplateContent;
import fr.sii.ogham.core.service.MessagingService;
import fr.sii.ogham.email.message.Email;

public class HtmlAndTextTemplateSample {

	public static void main(String[] args) throws MessagingException {
		// configure properties (could be stored in a properties file or defined
		// in System properties)
		Properties properties = new Properties();
		properties.setProperty(&quot;mail.smtp.host&quot;, &quot;&lt;your server host&gt;&quot;);
		properties.setProperty(&quot;mail.smtp.port&quot;, &quot;&lt;your server port&gt;&quot;);
		properties.setProperty(&quot;ogham.email.from&quot;, &quot;&lt;email address to display for the sender user&gt;&quot;);
		// Instantiate the messaging service using default behavior and
		// provided properties
		MessagingService service = new MessagingBuilder().useAllDefaults(properties).build();
		// send the email using constructor
		// Note that the extension of the template is not given. This version
		// automatically takes the provided path and adds the '.html' extension
		// for the HTML template and '.txt' for text template
		service.send(new Email(&quot;subject&quot;, new MultiTemplateContent(&quot;classpath:/template/thymeleaf/simple&quot;, new SimpleBean(&quot;foo&quot;, 42)), &quot;&lt;recipient address&gt;&quot;));
		// or send the email using fluent API
		service.send(new Email().
							subject(&quot;subject&quot;).
							content(new MultiTemplateContent(&quot;classpath:/template/thymeleaf/simple&quot;, new SimpleBean(&quot;foo&quot;, 42))).
							to(&quot;&lt;recipient address&gt;&quot;));
	}

}
</pre> 
    </div> 
   </div> 
   <p>Here is the content of the HTML template (available <a class="externalLink" href="https://github.com/groupe-sii/ogham/tree/master/sample-standard-usage/src/main/resources/template/thymeleaf/simple.html">here</a>):</p> 
   <div class="source"> 
    <div class="source"> 
     <pre>&lt;!DOCTYPE html&gt;
&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;
    &lt;head&gt;
        &lt;meta charset=&quot;utf-8&quot; /&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h1 class=&quot;title&quot; th:text=&quot;${name}&quot;&gt;&lt;/h1&gt;
        &lt;p class=&quot;text&quot; th:text=&quot;${value}&quot;&gt;&lt;/p&gt;
    &lt;/body&gt;
&lt;/html&gt;
</pre> 
    </div> 
   </div> 
   <p>And the templated content (available <a class="externalLink" href="https://github.com/groupe-sii/ogham/tree/master/sample-standard-usage/src/main/resources/template/thymeleaf/simple.txt">here</a>):</p> 
   <div class="source"> 
    <div class="source"> 
     <pre>&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot; th:inline=&quot;text&quot; th:remove=&quot;tag&quot;&gt;
[[${name}]]
[[${value}]]
&lt;/html&gt;
</pre> 
    </div> 
   </div> 
  </div> 
  <div class="section"> 
   <h4 id="Using_FreeMarker"><a name="using-freemarker"></a>Using FreeMarker</h4> 
   <p>If you prefer FreeMarker as template engine, you just need to create your templates using FreeMarker (templates for FreeMarker are suffixed by <tt>.ftl</tt> extension).</p> 
   <div class="section"> 
    <h5 id="Sending_an_email_with_both_HTML_and_text">Sending an email with both HTML and text</h5> 
    <p>Content of the HTML template (simple.html.ftl):</p> 
    <div class="source"> 
     <div class="source"> 
      <pre>&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;meta charset=&quot;utf-8&quot; /&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h1 class=&quot;title&quot;&gt;${name}&lt;/h1&gt;
        &lt;p class=&quot;text&quot;&gt;${value}&lt;/p&gt;
    &lt;/body&gt;
&lt;/html&gt;
</pre> 
     </div> 
    </div> 
    <p>Content of the text template (simple.txt.ftl):</p> 
    <div class="source"> 
     <div class="source"> 
      <pre>${name} ${value}
</pre> 
     </div> 
    </div> 
    <p>The Java code is the same as before, no difference at all. Ogham automatically discover your templates and understands that you are using FreeMarker template files.</p> 
    <p><span class="highlight" data-irrelevant-lines="1-11,14-27,29,34"></span> <span class="collapse" data-lines="1-11"></span></p> 
    <div class="source"> 
     <div class="source"> 
      <pre>package fr.sii.ogham.sample.standard.template.freemarker;

import java.util.Properties;

import fr.sii.ogham.context.SimpleBean;
import fr.sii.ogham.core.builder.MessagingBuilder;
import fr.sii.ogham.core.exception.MessagingException;
import fr.sii.ogham.core.message.content.MultiTemplateContent;
import fr.sii.ogham.core.service.MessagingService;
import fr.sii.ogham.email.message.Email;

public class HtmlAndTextTemplateSample {

	public static void main(String[] args) throws MessagingException {
		// configure properties (could be stored in a properties file or defined
		// in System properties)
		Properties properties = new Properties();
		properties.setProperty(&quot;mail.smtp.host&quot;, &quot;&lt;your server host&gt;&quot;);
		properties.setProperty(&quot;mail.smtp.port&quot;, &quot;&lt;your server port&gt;&quot;);
		properties.setProperty(&quot;ogham.email.from&quot;, &quot;&lt;email address to display for the sender user&gt;&quot;);
		// Instantiate the messaging service using default behavior and
		// provided properties
		MessagingService service = new MessagingBuilder().useAllDefaults(properties).build();
		// send the email
		// Note that the extension of the template is not given. This version
		// automatically takes the provided path and adds the '.html' extension
		// for the HTML template and '.txt' for text template
		service.send(new Email(&quot;subject&quot;, new MultiTemplateContent(&quot;classpath:/template/freemarker/simple&quot;, new SimpleBean(&quot;foo&quot;, 42)), &quot;&lt;recipient address&gt;&quot;));
		// or using fluent API
		service.send(new Email()
						.subject(&quot;subject&quot;)
						.content(new MultiTemplateContent(&quot;classpath:/template/freemarker/simple&quot;, new SimpleBean(&quot;foo&quot;, 42)))
						.to(&quot;&lt;recipient address&gt;&quot;));
	}

}
</pre> 
     </div> 
    </div> 
   </div> 
   <div class="section"> 
    <h5 id="Mixing_Thymeleaf_and_FreeMarker">Mixing Thymeleaf and FreeMarker</h5> 
    <p>It is possible to mix templates in the same application. Even better, you can use a template engine that is better suited for HTML like Thymeleaf and FreeMarker that is better for textual version for the same email. Just write your templates with the engine you want.</p> 
    <p>See samples to <a class="externalLink" href="https://github.com/groupe-sii/ogham/tree/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/email/HtmlAndTextMixedTemplateEnginesSample.java">ensure that Java code is still the same</a>.</p> 
    <p>Only the templates are different:</p> 
    <ul> 
     <li><a class="externalLink" href="https://github.com/groupe-sii/ogham/tree/master/sample-standard-usage/src/main/resources/template/mixed/simple.html">HTML template using Thymeleaf</a></li> 
     <li><a class="externalLink" href="https://github.com/groupe-sii/ogham/tree/master/sample-standard-usage/src/main/resources/template/mixed/simple.txt.ftl">Text template using FreeMarker</a></li> 
    </ul> 
   </div> 
  </div> 
 </div> 
 <div class="section"> 
  <h3 id="Attachments"><a name="attachments"></a>Attachments</h3> 
  <p>This sample shows how to send an email with attached file. The sample is available <a class="externalLink" href="https://github.com/groupe-sii/ogham/tree/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/email/WithAttachmentSample.java">here</a></p> 
  <p>The first lines configure the properties that will be used by the sender. Then you must create the service. You can use the MessagingBuilder to help you to create the service. Finally, the last line sends the email. The specified email is really basic too. It only contains the subject, the textual content, the receiver address and the attachment file that is available in the classpath. You may use several attachments too. The sender address is automatically added to the email by the service based on configuration properties.</p> 
  <p><span class="highlight" data-lines="24,30" data-irrelevant-lines="1-10,14-23"></span> <span class="collapse" data-lines="1-10,14-23"></span></p> 
  <div class="source"> 
   <div class="source"> 
    <pre>package fr.sii.ogham.sample.standard.email;

import java.util.Properties;

import fr.sii.ogham.core.builder.MessagingBuilder;
import fr.sii.ogham.core.exception.MessagingException;
import fr.sii.ogham.core.service.MessagingService;
import fr.sii.ogham.email.attachment.Attachment;
import fr.sii.ogham.email.message.Email;

public class WithAttachmentSample {

	public static void main(String[] args) throws MessagingException {
		// configure properties (could be stored in a properties file or defined
		// in System properties)
		Properties properties = new Properties();
		properties.put(&quot;mail.smtp.host&quot;, &quot;&lt;your server host&gt;&quot;);
		properties.put(&quot;mail.smtp.port&quot;, &quot;&lt;your server port&gt;&quot;);
		properties.put(&quot;ogham.email.from&quot;, &quot;&lt;email address to display for the sender user&gt;&quot;);
		// Instantiate the messaging service using default behavior and
		// provided properties
		MessagingService service = new MessagingBuilder().useAllDefaults(properties).build();
		// send the email using constructor
		service.send(new Email(&quot;subject&quot;, &quot;content of the email&quot;, &quot;&lt;recipient address&gt;&quot;, new Attachment(&quot;classpath:/attachment/test.pdf&quot;)));
		// or send the email using fluent API
		service.send(new Email().
							subject(&quot;subject&quot;).
							content(&quot;content of the email&quot;).
							to(&quot;&lt;recipient address&gt;&quot;).
							attach(new Attachment(&quot;classpath:/attachment/test.pdf&quot;)));
	}

}
</pre> 
   </div> 
  </div> 
 </div> 
 <div class="section"> 
  <h3 id="Full_sample"><a name="full-sample"></a>Full sample</h3> 
  <p>This sample combines all features:</p> 
  <ul> 
   <li>Uses templates (HTML and text templates)</li> 
   <li>HTML template includes page fragments</li> 
   <li>HTML template references external CSS and images</li> 
   <li>The subject is directly extracted from template</li> 
   <li>The email is sent with one attachment</li> 
  </ul> 
  <p>Here is the Java code (<a class="externalLink" href="https://github.com/groupe-sii/ogham/tree/master/sample-standard-usage/src/main/java/fr/sii/ogham/sample/standard/email/FullSample.java">available here</a>):</p> 
  <p><span class="highlight" data-irrelevant-lines="1-13"></span> <span class="collapse" data-lines="1-13"></span></p> 
  <div class="source"> 
   <div class="source"> 
    <pre>package fr.sii.ogham.sample.standard.email;

import java.io.IOException;
import java.util.Properties;

import fr.sii.ogham.context.SimpleBean;
import fr.sii.ogham.core.builder.MessagingBuilder;
import fr.sii.ogham.core.exception.MessagingException;
import fr.sii.ogham.core.message.content.MultiTemplateContent;
import fr.sii.ogham.core.service.MessagingService;
import fr.sii.ogham.email.attachment.Attachment;
import fr.sii.ogham.email.message.Email;

public class FullSample {

	public static void main(String[] args) throws MessagingException, IOException {
		// configure properties from file
		Properties properties = new Properties();
		properties.load(FullSample.class.getResourceAsStream(&quot;/email-template.properties&quot;));
		// Instantiate the messaging service using default behavior and
		// provided properties
		MessagingService service = new MessagingBuilder().useAllDefaults(properties).build();
		// send the email using fluent API
		// @formatter:off
		service.send(new Email().
						content(new MultiTemplateContent(&quot;full&quot;, new SimpleBean(&quot;foo&quot;, 42))).
						to(&quot;&lt;recipient address&gt;&quot;).
						attach(new Attachment(&quot;/attachment/test.pdf&quot;)));
		// @formatter:on
	}

}
</pre> 
   </div> 
  </div> 
  <p>The loaded property file content:</p> 
  <p><span class="highlight" data-irrelevant-lines="4-11"></span></p> 
  <div class="source"> 
   <div class="source"> 
    <pre># general SMTP server
mail.smtp.host=&lt;your server host&gt;
mail.smtp.port=&lt;your server port&gt;
# using with Gmail
#mail.smtp.auth=true
#mail.smtp.host=smtp.gmail.com
#mail.smtp.port=465
#mail.smtp.socketFactory.port=465
#mail.smtp.socketFactory.class=javax.net.ssl.SSLSocketFactory
#ogham.email.authenticator.username=&lt;your gmail username&gt;
#ogham.email.authenticator.password=&lt;your gmail password&gt;

# ogham additional properties
ogham.email.from=&lt;sender email address&gt;
ogham.email.template.prefix=/template/thymeleaf/email/
</pre> 
   </div> 
  </div> 
  <p>The HTML template content is <a class="externalLink" href="https://github.com/groupe-sii/ogham/tree/master/sample-standard-usage/src/main/resources/template/thymeleaf/email/full.html">available here</a>. The content of the HTML is not displayed entirely. Just useful parts are shown here:</p> 
  <p><span class="highlight" data-lines="4,8,13,17"></span></p> 
  <div class="source"> 
   <div class="source"> 
    <pre>&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;
&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;
&lt;!-- Load fragment that contains external CSS --&gt;
&lt;head th:replace=&quot;fragments/header.html :: header&quot;&gt;&amp;nbsp;&lt;/head&gt;
&lt;body id=&quot;body_2a02_0&quot;&gt;
	...
		&lt;!-- Use image --&gt;
		&lt;img src=&quot;classpath:/resources/images/h1.gif&quot; alt=&quot;Creating Email Magic&quot; width=&quot;300&quot; height=&quot;230&quot; /&gt;
	...
		&lt;!-- Use of variables and CSS classes that will be interned --&gt;
		&lt;tr&gt;
			&lt;td id=&quot;td_2a02_3&quot;&gt;
				&lt;span class=&quot;name&quot; th:text=&quot;${name}&quot;&gt;${name}&lt;/span&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td id=&quot;td_2a02_4&quot; class=&quot;value&quot; th:text=&quot;${value}&quot;&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
	...
</pre> 
   </div> 
  </div> 
  <p>Now the content of the header (<a class="externalLink" href="https://github.com/groupe-sii/ogham/tree/master/sample-standard-usage/src/main/resources/template/thymeleaf/email/fragments/header.html">available here</a>). The header contains the subject of the email (with title tag) and references external CSS files that will be interned directly in the HTML:</p> 
  <p><span class="highlight" data-lines="5,7-8"></span></p> 
  <div class="source"> 
   <div class="source"> 
    <pre>&lt;!DOCTYPE html&gt;
&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;
	&lt;head th:fragment=&quot;header&quot;&gt;
		&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;
		&lt;title&gt;Full Sample&lt;/title&gt;
		&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;/&gt;
		&lt;link href=&quot;classpath:/resources/css/external1.css&quot; rel=&quot;stylesheet&quot; /&gt;
		&lt;link href=&quot;classpath:/resources/css/external2.css&quot; rel=&quot;stylesheet&quot; /&gt;
	&lt;/head&gt;
&lt;/html&gt;
</pre> 
   </div> 
  </div> 
  <p>The content of the CSS files are not displayed here but <a class="externalLink" href="https://github.com/groupe-sii/ogham/tree/master/sample-standard-usage/src/main/resources/resources/css/">can be found in samples</a>. Useful classes are <tt>name</tt> and <tt>value</tt>.</p> 
  <p>The text template is <a class="externalLink" href="https://github.com/groupe-sii/ogham/tree/master/sample-standard-usage/src/main/resources/template/thymeleaf/email/full.txt">available here</a>.</p> 
 </div> 
 <div class="section"> 
  <h3 id="Spring_Boot"><a name="spring-boot"></a>Spring Boot</h3> 
  <p>See <a href="integration.html#integrate-with-spring-boot">Spring integration</a> to know how to use Ogham with Spring Boot.</p> 
  <p>Spring comes with very useful management of configuration properties (environment and profiles). Ogham module is able to use environment provided by Spring.</p> 
  <p>Add the following information in the application.properties (or according to profile, into the right configuration file):</p> 
  <div class="source"> 
   <div class="source"> 
    <pre>mail.smtp.host=&lt;your server host&gt;
mail.smtp.port=&lt;your server port&gt;
ogham.email.from=&lt;your gmail address&gt;
</pre> 
   </div> 
  </div> 
  <div class="section"> 
   <h4 id="REST_web_service">REST web service</h4> 
   <div class="section"> 
    <h5 id="Basic_email">Basic email</h5> 
    <p>To use Ogham in Spring, you can directly inject (autowire) it. Here is a full Spring Boot application serving one REST endpoint for sending email using Ogham (<a class="externalLink" href="https://github.com/groupe-sii/ogham/blob/master/sample-spring-usage/src/main/java/fr/sii/ogham/sample/springboot/email/BasicSample.java">sample available here</a>):</p> 
    <p><span class="highlight" data-lines="31-32,38-43" data-irrelevant-lines="1-17,19"></span> <span class="collapse" data-lines="1-17"></span></p> 
    <div class="source"> 
     <div class="source"> 
      <pre>package fr.sii.ogham.sample.springboot.email;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.context.annotation.PropertySource;
import org.springframework.http.HttpStatus;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.ResponseStatus;
import org.springframework.web.bind.annotation.RestController;

import fr.sii.ogham.core.exception.MessagingException;
import fr.sii.ogham.core.service.MessagingService;
import fr.sii.ogham.email.message.Email;

@SpringBootApplication
@PropertySource(&quot;application-email-basic.properties&quot;)	// just needed to be able to run the sample
public class BasicSample {

	public static void main(String[] args) throws MessagingException {
		SpringApplication.run(BasicSample.class, args);
	}
	
	@RestController
	public static class EmailController {
		// Messaging service is automatically created using Spring Boot features
		// The configuration can be set into application-email-basic.properties
		// The configuration files are stored into src/main/resources
		@Autowired
		MessagingService messagingService;
		
		@RequestMapping(value=&quot;api/email/basic&quot;, method=RequestMethod.POST)
		@ResponseStatus(HttpStatus.CREATED)
		public void sendMail(@RequestParam(&quot;subject&quot;) String subject, @RequestParam(&quot;content&quot;) String content, @RequestParam(&quot;to&quot;) String to) throws MessagingException {
			// send the email
			messagingService.send(new Email(subject, content, to));
			// or using fluent API
			messagingService.send(new Email().
									subject(subject).
									content(content).
									to(to));
		}
	}

}

</pre> 
     </div> 
    </div> 
   </div> 
   <div class="section"> 
    <h5 id="Email_with_subject_in_templates">Email with subject in templates</h5> 
    <p>This sample show how to use messaging service using both HTML and text templates. The templates also directly contain subject. The sample is available <a class="externalLink" href="https://github.com/groupe-sii/ogham/blob/master/sample-spring-usage/src/main/java/fr/sii/ogham/sample/springboot/email/HtmlAndTextTemplateWithSubjectSample.java">here</a></p> 
    <p><span class="highlight" data-lines="34-35,41,43-45" data-irrelevant-lines="1-19,21"></span> <span class="collapse" data-lines="1-19"></span></p> 
    <div class="source"> 
     <div class="source"> 
      <pre>package fr.sii.ogham.sample.springboot.email;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.context.annotation.PropertySource;
import org.springframework.http.HttpStatus;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.ResponseStatus;
import org.springframework.web.bind.annotation.RestController;

import fr.sii.ogham.context.SimpleBean;
import fr.sii.ogham.core.exception.MessagingException;
import fr.sii.ogham.core.message.content.MultiTemplateContent;
import fr.sii.ogham.core.service.MessagingService;
import fr.sii.ogham.email.message.Email;

@SpringBootApplication
@PropertySource(&quot;application-email-template.properties&quot;)	// just needed to be able to run the sample
public class HtmlAndTextTemplateWithSubjectSample {

	public static void main(String[] args) throws MessagingException {
		SpringApplication.run(HtmlAndTextTemplateWithSubjectSample.class, args);
	}
	
	@RestController
	public static class EmailController {
		// Messaging service is automatically created using Spring Boot features
		// The configuration can be set into application-email-template.properties
		// The configuration files are stored into src/main/resources
		// The configuration file set the prefix for templates into email folder available in src/main/resources
		@Autowired
		MessagingService messagingService;
		
		@RequestMapping(value=&quot;api/email/template&quot;, method=RequestMethod.POST)
		@ResponseStatus(HttpStatus.CREATED)
		public void sendEmail(@RequestParam(&quot;to&quot;) String to, @RequestParam(&quot;name&quot;) String name, @RequestParam(&quot;value&quot;) int value) throws MessagingException {
			// send the email
			messagingService.send(new Email(null, new MultiTemplateContent(&quot;register&quot;, new SimpleBean(name, value)), to));
			// or using fluent API
			messagingService.send(new Email().
									content(new MultiTemplateContent(&quot;register&quot;, new SimpleBean(name, value))).
									to(to));
		}
	}

}
</pre> 
     </div> 
    </div> 
    <p>Here is the content of the <a class="externalLink" href="https://github.com/groupe-sii/ogham/blob/master/sample-spring-usage/src/main/resources/email/register.html">HTML template</a>:</p> 
    <p><span class="highlight" data-lines="4"></span></p> 
    <div class="source"> 
     <div class="source"> 
      <pre>&lt;!DOCTYPE html&gt;
&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;
    &lt;head&gt;
        &lt;title&gt;Subject of the mail&lt;/title&gt;
        &lt;meta charset=&quot;utf-8&quot; /&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h1 class=&quot;title&quot; th:text=&quot;${name}&quot;&gt;&lt;/h1&gt;
        &lt;p class=&quot;text&quot; th:text=&quot;${value}&quot;&gt;&lt;/p&gt;
    &lt;/body&gt;
&lt;/html&gt;
</pre> 
     </div> 
    </div> 
    <p>The content of the <a class="externalLink" href="https://github.com/groupe-sii/ogham/blob/master/sample-spring-usage/src/main/resources/email/register.txt">text template</a>:</p> 
    <p><span class="highlight" data-lines="1"></span></p> 
    <div class="source"> 
     <div class="source"> 
      <pre>&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot; th:inline=&quot;text&quot; th:remove=&quot;tag&quot;&gt;Subject: Subject of the email
[[${name}]] [[${value}]]&lt;/html&gt;
</pre> 
     </div> 
    </div> 
    <p>Finally, the content of the <a class="externalLink" href="https://github.com/groupe-sii/ogham/blob/master/sample-spring-usage/src/main/resources/application-email-template.properties">property file</a> is:</p> 
    <div class="source"> 
     <div class="source"> 
      <pre># ogham configuration for email
mail.smtp.host=&lt;your server host&gt;
mail.smtp.port=&lt;your server port&gt;
ogham.email.from=&lt;your gmail address&gt;
ogham.email.template.prefix=/email/
</pre> 
     </div> 
    </div> 
    <p>We have just added the template prefix. It tells Ogham where to look for email templates. All template names or relative paths provided to <tt>TemplateContent</tt> or <tt>MultiTemplateContent</tt> are relative to this prefix. By default, Ogham look for templates in the classpath. See <a href="../config/templates.html">template section</a> for more information about prefix and suffix.</p> 
   </div> 
  </div> 
 </div> 
</div>
			</div>
		</div>
	</div>
	</div>

	</div><!-- /container -->

	<!-- Footer
	================================================== -->
	<footer class="well">
		<div class="container">
			<div class="row">
				<div class="span2 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Main</li>
						<li >
							<a href="../" title="Home">Home</a>
						</li>
						<li >
							<a href="http://github.com/groupe-sii/ogham/" title="GitHub project" class="externalLink">GitHub project</a>
						</li>
						<li >
							<a href="../release-notes.html" title="Release notes">Release notes</a>
						</li>
					</ul>
				</div>
				<div class="span2 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Download</li>
						<li >
							<a href="integration.html" title="Download">Download</a>
						</li>
						<li >
							<a href="../license.html" title="License">License</a>
						</li>
						<li class="nav-header">Contribute</li>
						<li >
							<a href="../contribute.html" title="Contribute">Contribute</a>
						</li>
						<li >
							<a href="http://github.com/groupe-sii/ogham/issues/" title="Issues" class="externalLink">Issues</a>
						</li>
						<li >
							<a href="http://github.com/groupe-sii/ogham/" title="Fork on GitHub" class="externalLink">Fork on GitHub</a>
						</li>
					</ul>
				</div>
				<div class="span2 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Documentation</li>
						<li >
							<a href="index.html" title="Usage">Usage</a>
						</li>
						<li >
							<a href="../config/index.html" title="Configuration">Configuration</a>
						</li>
						<li >
							<a href="../extend/index.html" title="Extends">Extends</a>
						</li>
						<li >
							<a href="../apidocs/index.html" title="Javadoc">Javadoc</a>
						</li>
					</ul>
				</div>
				<div class="span3 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Maven documentation</li>
						<li >
							<a href="../project-info.html" title="Project Information">Project Information <i class="icon-chevron-right"></i></a>
						</li>
						<li >
							<a href="../project-reports.html" title="Project Reports">Project Reports <i class="icon-chevron-right"></i></a>
						</li>
					</ul>
				</div>
				<div class="span3 bottom-description">
					<blockquote>Open, General and Highly Adaptative Messaging
				library. It is
				a reusable
				Java library for sending any kind of message
				(email, SMS,
				mobile
				notification,
				tweet, SNMP...). The content of the
				message can
				comes from any
				templating engine (Thymeleaf, FreeMarker,
				Velocity,
				...). It also
				provides bridges for framework integration
				(Spring,
				JSF, ...). It
				is designed to be easily extended.</blockquote>
				</div>
			</div>
		</div>
	</footer>

	<div class="container subfooter">
		<div class="row">
			<div class="span12">
				<p class="pull-right"><a href="#">Back to top</a></p>
				<p class="copyright">Copyright &copy;2017. All Rights Reserved.</p>
				<p class="version-date"><span class="projectVersion">Version: 1.1.0. </span></p>
				<p><a href="http://github.com/andriusvelykis/reflow-maven-skin" title="Reflow Maven skin">Reflow Maven skin</a> by <a href="http://andrius.velykis.lt" target="_blank" title="Andrius Velykis">Andrius Velykis</a>.</p>
			</div>
		</div>
	</div>

	<!-- Le javascript
	================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

	<script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
	<script src="http://groupe-sii.github.io/ogham//js/lightbox.min.js"></script>
	<script src="http://groupe-sii.github.io/ogham//js/reflow-scroll.js"></script>
	<script src="http://yandex.st/highlightjs/7.5/highlight.min.js"></script>
	
<script src="http://groupe-sii.github.io/ogham//js/site.js"></script>
<script src="http://groupe-sii.github.io/ogham//js/line-utils.js"></script>
<script src="http://groupe-sii.github.io/ogham//js/highlight-lines.js"></script>
<script src="http://groupe-sii.github.io/ogham//js/collapse-lines.js"></script>
<script src="http://groupe-sii.github.io/ogham//js/alternatives.js"></script>
	<script src="http://groupe-sii.github.io/ogham//js/reflow-skin.js"></script>

	</body>
</html>
